<section class="news-details-section ">
  <div class="container-fluid">
    
    <!-- Loading State -->
    <div class="loading-container text-center py-5" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading article...</p>
    </div>

    <!-- Error State -->
    <div class="error-container text-center py-5" *ngIf="error && !loading">
      <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
      <h3>Article Not Found</h3>
      <p class="text-muted mb-4">The article you're looking for doesn't exist or has been removed.</p>
      <button class="btn btn-primary-custom" (click)="goBack()">
        <i class="fas fa-arrow-left me-2"></i>
        Back to News
      </button>
    </div>

    <!-- Main Content -->
    <div class="row" *ngIf="newsItem && !loading && !error">
      
      <!-- Article Content -->
      <div class="col-lg-8 col-md-7">
        <article class="news-article card-custom">
          
          <!-- Article Header -->
          <div class="article-header">
            <div class="article-meta">
              <span class="article-type" [class]="newsItem.type">
                <i class="fas" [class.fa-newspaper]="newsItem.type === 'news'" [class.fa-file-alt]="newsItem.type === 'article'"></i>
                {{ newsItem.type | titlecase }}
              </span>
              <span class="article-date">
                <i class="fas fa-calendar-alt me-1"></i>
                {{ formatDate(newsItem.date) }}
              </span>
              <span class="article-author" *ngIf="newsItem.author">
                <i class="fas fa-user me-1"></i>
                {{ newsItem.author }}
              </span>
            </div>
            
            <h1 class="article-title">{{ newsItem.title }}</h1>
            
            <!-- Tags -->
            <div class="article-tags" *ngIf="newsItem.tags && newsItem.tags.length > 0">
              <span class="tag" *ngFor="let tag of newsItem.tags">
                {{ tag }}
              </span>
            </div>
          </div>

          <!-- Article Image -->
          <div class="article-image-container" *ngIf="newsItem.image">
            <img [src]="newsItem.image" [alt]="newsItem.title" class="article-image">
          </div>

          <!-- Article Content -->
          <div class="article-content">
            <div class="article-excerpt" *ngIf="newsItem.excerpt">
              <p class="lead">{{ newsItem.excerpt }}</p>
            </div>
            
            <div class="article-body">
              <p>{{ newsItem.content }}</p>
            </div>
          </div>

          <!-- Article Footer -->
          <div class="article-footer">
            <div class="share-buttons">
              <h6>Share this {{ newsItem.type }}:</h6>
              <div class="social-share">
                <button class="share-btn facebook" (click)="shareOnSocial('facebook')" title="Share on Facebook">
                  <i class="fab fa-facebook-f"></i>
                </button>
                <button class="share-btn twitter" (click)="shareOnSocial('twitter')" title="Share on Twitter">
                  <i class="fab fa-twitter"></i>
                </button>
                <button class="share-btn linkedin" (click)="shareOnSocial('linkedin')" title="Share on LinkedIn">
                  <i class="fab fa-linkedin-in"></i>
                </button>
              </div>
            </div>
          </div>
        </article>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4 col-md-5">
        <aside class="news-sidebar">
          
          <!-- Navigation Buttons -->
          <div class="sidebar-section card-custom mb-4">
            <h5 class="sidebar-title">Navigation</h5>
            <div class="nav-buttons">
              <button class="btn btn-outline-custom w-100 mb-2" (click)="goBack()">
                <i class="fas fa-arrow-left me-2"></i>
                Back to All News
              </button>
              <button class="btn btn-outline-custom w-100" (click)="goBackToType()">
                <i class="fas fa-arrow-left me-2"></i>
                Back to {{ newsItem.type | titlecase }}s
              </button>
            </div>
          </div>

          <!-- Related Items -->
          <div class="sidebar-section card-custom" *ngIf="relatedItems.length > 0">
            <h5 class="sidebar-title">
              Related {{ newsItem.type === 'news' ? 'News' : 'Articles' }}
            </h5>
            
            <div class="related-items">
              <div class="related-item" *ngFor="let item of relatedItems">
                <div class="related-image">
                  <img [src]="item.image" [alt]="item.title" class="img-cover">
                  <div class="related-type-badge" [class]="item.type">
                    <i class="fas" [class.fa-newspaper]="item.type === 'news'" [class.fa-file-alt]="item.type === 'article'"></i>
                  </div>
                </div>
                
                <div class="related-content">
                  <h6 class="related-title">
                    <a [routerLink]="['/news', item.id]">{{ item.title }}</a>
                  </h6>
                  <p class="related-date">
                    <i class="fas fa-calendar-alt me-1"></i>
                    {{ formatDate(item.date) }}
                  </p>
                  <p class="related-excerpt">{{ item.excerpt | slice:0:80 }}...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Article Info -->
          <div class="sidebar-section card-custom">
            <h5 class="sidebar-title">Article Information</h5>
            <div class="article-info">
              <div class="info-item">
                <strong>Type:</strong>
                <span class="ms-2">{{ newsItem.type | titlecase }}</span>
              </div>
              <div class="info-item" *ngIf="newsItem.category">
                <strong>Category:</strong>
                <span class="ms-2">{{ newsItem.category }}</span>
              </div>
              <div class="info-item" *ngIf="newsItem.author">
                <strong>Author:</strong>
                <span class="ms-2">{{ newsItem.author }}</span>
              </div>
              <div class="info-item">
                <strong>Published:</strong>
                <span class="ms-2">{{ formatDate(newsItem.date) }}</span>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </div>
</section>