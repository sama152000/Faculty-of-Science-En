<section class="services-section">
  <div class="container-fluid">
    <h2 class="section-title">Faculty Services</h2>

    <!-- Loading State -->
    @if (loading()) {
    <div class="row">
      <div class="col-lg-3 col-md-4 mb-4">
        <div class="services-sidebar card-custom">
          <p-skeleton height="2rem" width="60%" styleClass="mb-4" />
          @for (i of [1, 2, 3, 4]; track i) {
          <p-skeleton height="4rem" styleClass="mb-2" />
          }
        </div>
      </div>
      <div class="col-lg-9 col-md-8">
        <div class="card-custom p-4">
          <p-skeleton height="6rem" styleClass="mb-4" />
          <p-skeleton height="3rem" styleClass="mb-2" />
          <p-skeleton height="15rem" />
        </div>
      </div>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="text-center py-5">
      <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
      <h4 class="mb-3">{{ error() }}</h4>
      <button class="btn btn-primary" (click)="retry()">
        <i class="fas fa-refresh me-2"></i>Try Again
      </button>
    </div>
    }

    <!-- Success State -->
    @if (!loading() && !error() && hasData()) {
    <div class="row">
      <!-- Services Sidebar -->
      <div class="col-lg-3 col-md-4 mb-4">
        <div class="services-sidebar card-custom">
          <h4 class="sidebar-title">
            <i class="fas fa-cogs me-2"></i>
            Available Services
          </h4>

          <ul class="services-list">
            @for (service of services(); track service.id) {
            <li>
              <button
                class="service-btn"
                [class.active]="isServiceSelected(service.id)"
                (click)="selectService(service)"
              >
                <div class="service-icon">
                  @if (service.iconPath && service.iconPath.startsWith('http'))
                  {
                  <img
                    [src]="service.iconPath"
                    [alt]="service.title"
                    class="service-img"
                  />
                  } @else {
                  <i [class]="getServiceIcon(service)"></i>
                  }
                </div>
                <div class="service-info">
                  <h6 class="service-name">{{ service.title }}</h6>
                  <p class="service-desc">{{ service.description }}</p>
                </div>
              </button>
            </li>
            }
          </ul>
        </div>
      </div>

      <!-- Service Content -->
      <div class="col-lg-9 col-md-8">
        @if (selectedService(); as service) {
        <div class="service-content">
          <!-- Service Header -->
          <div class="service-header card-custom mb-4">
            <div class="header-content">
              <div class="service-icon-large">
                @if (service.iconPath && service.iconPath.startsWith('http')) {
                <img
                  [src]="service.iconPath"
                  [alt]="service.title"
                  class="service-img-large"
                />
                } @else {
                <i [class]="getServiceIcon(service)"></i>
                }
              </div>
              <div class="header-info">
                <h1 class="service-title">{{ service.title }}</h1>
                <p class="service-subtitle">{{ service.description }}</p>
                <div class="service-meta">
                  @if (service.isActive) {
                  <p-tag value="Active" severity="success" />
                  } @else {
                  <p-tag value="Inactive" severity="danger" />
                  }
                </div>
              </div>
            </div>
          </div>

          <!-- Service Details -->
          <div class="section-content card-custom">
            <div class="content-section">
              <div class="section-header">
                <h3 class="section-title-left">
                  <i class="fas fa-info-circle text-primary-custom me-3"></i>
                  Service Details
                </h3>
              </div>

              <div class="content-body">
                <p class="lead" [innerHTML]="service.description"></p>
              </div>
            </div>
          </div>
        </div>
        } @else {
        <!-- No Service Selected -->
        <div class="no-selection text-center py-5">
          <i class="fas fa-cogs fa-3x text-muted mb-3"></i>
          <h4>Select a Service</h4>
          <p class="text-muted">
            Choose a service from the sidebar to view detailed information.
          </p>
        </div>
        }
      </div>
    </div>
    }

    <!-- Empty State -->
    @if (!loading() && !error() && !hasData()) {
    <div class="text-center py-5">
      <i class="fas fa-cogs fa-3x text-muted mb-3"></i>
      <h4>No Services Available</h4>
      <p class="text-muted">Services will be added soon.</p>
    </div>
    }
  </div>
</section>
